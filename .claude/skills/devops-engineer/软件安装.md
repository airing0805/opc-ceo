---
name: software-installation
description: 软件安装管理 - Winget/Scoop/Chocolatey、开发环境配置
version: 1.0.0
parent: devops-engineer
---

# 软件安装管理

## Windows 包管理器

### Winget（Windows 包管理器）

#### 基础命令

```powershell
# 搜索软件
winget search 软件名

# 安装软件
winget install --id 软件ID
winget install 软件名

# 更新软件
winget upgrade --id 软件ID
winget upgrade --all

# 卸载软件
winget uninstall --id 软件ID

# 列出已安装软件
winget list

# 查看软件详情
winget show --id 软件ID
```

#### 常用软件安装

```powershell
# 开发工具
winget install Microsoft.VisualStudioCode
winget install Git.Git
winget install Microsoft.VisualStudio.2022.Community

# 运行时环境
winget install Python.Python.3.12
winget install Node.js.LTS
winget install GoLang.Go
winget install Oracle.JavaRuntimeEnvironment

# 容器/虚拟化
winget install Docker.DockerDesktop
winget install VMware.WorkstationPlayer

# 工具软件
winget install 7zip.7zip
winget install voidtools.Everything
winget install Microsoft.PowerToys
winget install JanDeDobbeleer.OhMyPosh
winget install Microsoft.WindowsTerminal

# 浏览器
winget install Google.Chrome
winget install Mozilla.Firefox
winget install Microsoft.Edge

# 通讯
winget install Tencent.WeChat
winget install Tencent.QQ
winget install Discord.Discord
```

### Scoop（命令行包管理器）

#### 安装 Scoop

```powershell
# 设置执行策略
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# 安装 Scoop
irm get.scoop.sh | iex

# 或使用代理
irm get.scoop.sh -Proxy http://127.0.0.1:7890 | iex
```

#### 基础命令

```powershell
# 搜索软件
scoop search 软件名

# 安装软件
scoop install 软件名

# 更新软件
scoop update 软件名
scoop update *

# 卸载软件
scoop uninstall 软件名

# 列出已安装
scoop list

# 清理旧版本
scoop cleanup *
scoop cache rm *
```

#### 添加 Bucket

```powershell
# 查看已知 bucket
scoop bucket known

# 添加常用 bucket
scoop bucket add extras
scoop bucket add versions
scoop bucket add java
scoop bucket add games
scoop bucket add nerd-fonts

# 添加第三方 bucket
scoop bucket add scoop-cn https://github.com/duzyn/scoop-cn
```

#### 常用软件安装

```powershell
# 开发工具
scoop install git
scoop install python
scoop install nodejs-lts
scoop install go
scoop install rust
scoop install gcc

# 命令行工具
scoop install 7zip
scoop install curl
scoop install wget
scoop install ffmpeg
scoop install jq
scoop install fzf

# 终端/Shell
scoop install windows-terminal
scoop install pwsh

# 字体
scoop install nerd-fonts/JetBrainsMono-NF
scoop install nerd-fonts/CodeNewRoman-NF
```

### Chocolatey

#### 安装 Chocolatey

```powershell
# 以管理员运行 PowerShell
Set-ExecutionPolicy Bypass -Scope Process -Force
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072
iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```

#### 基础命令

```powershell
# 搜索软件
choco search 软件名

# 安装软件
choco install 软件名 -y

# 更新软件
choco upgrade 软件名 -y
choco upgrade all -y

# 卸载软件
choco uninstall 软件名 -y

# 列出已安装
choco list --local-only

# 查看软件信息
choco info 软件名
```

## 开发环境安装

### Python 环境

#### pyenv-win（Python 版本管理）

```powershell
# 方式 1：使用 pip
pip install pyenv-win --target %USERPROFILE%\.pyenv

# 方式 2：使用 scoop
scoop install pyenv

# 方式 3：使用 winget
winget install pyenv-win
```

#### pyenv 常用命令

```bash
# 查看可安装版本
pyenv install -l

# 安装版本
pyenv install 3.12.0
pyenv install 3.11.0
pyenv install 3.10.0

# 设置全局版本
pyenv global 3.12.0

# 设置项目版本
pyenv local 3.11.0

# 查看当前版本
pyenv version
pyenv versions

# 卸载版本
pyenv uninstall 3.10.0
```

#### 虚拟环境

```bash
# 创建虚拟环境
python -m venv .venv

# 激活虚拟环境
.\.venv\Scripts\activate  # Windows PowerShell
source .venv/bin/activate  # Linux/Mac

# 安装依赖
pip install -r requirements.txt

# 导出依赖
pip freeze > requirements.txt

# 退出虚拟环境
deactivate
```

### Node.js 环境

#### nvm-windows（Node 版本管理）

```powershell
# 安装 nvm-windows
winget install CoreyButler.NVMforWindows
# 或下载: https://github.com/coreybutler/nvm-windows/releases

# 安装后重启终端，然后：
nvm install lts      # 安装最新 LTS 版本
nvm install 20       # 安装 Node 20
nvm install 18       # 安装 Node 18

nvm list             # 查看已安装版本
nvm use 20           # 切换版本
nvm alias default 20 # 设置默认版本
```

#### 包管理器

```bash
# 安装 pnpm
npm install -g pnpm

# 安装 yarn
npm install -g yarn

# 常用全局包
npm install -g typescript
npm install -g ts-node
npm install -g @anthropic-ai/claude-code
npm install -g prettier
npm install -g eslint
```

#### npm 镜像配置

```bash
# 切换淘宝镜像
npm config set registry https://registry.npmmirror.com

# 使用 nrm 管理
npm install -g nrm
nrm ls
nrm use taobao
nrm use npm

# pnpm 镜像
pnpm config set registry https://registry.npmmirror.com
```

### Go 环境

#### 安装 Go

```powershell
# 使用 winget
winget install GoLang.Go

# 使用 scoop
scoop install go
```

#### 配置代理

```bash
# 设置代理（国内推荐）
go env -w GOPROXY=https://goproxy.cn,direct
go env -w GOPROXY=https://goproxy.io,direct

# 或组合使用
go env -w GOPROXY=https://goproxy.cn,https://goproxy.io,direct

# 查看配置
go env
```

#### 常用工具安装

```bash
# 语言服务器
go install golang.org/x/tools/gopls@latest

# 调试器
go install github.com/go-delve/delve/cmd/dlv@latest

# 代码检查
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest

# 测试工具
go install github.com/stretchr/testify@latest
```

### Rust 环境

#### 安装 Rust

```powershell
# 使用 winget
winget install Rustlang.Rustup

# 或下载安装器
# https://rustup.rs/
```

#### 镜像配置（国内加速）

```powershell
# 设置环境变量（安装前）
$env:RUSTUP_DIST_SERVER = "https://mirrors.ustc.edu.cn/rust-static"
$env:RUSTUP_UPDATE_ROOT = "https://mirrors.ustc.edu.cn/rust-static/rustup"

# 配置 cargo 镜像
# 编辑 ~/.cargo/config.toml
```

```toml
# ~/.cargo/config.toml
[source.crates-io]
replace-with = 'ustc'

[source.ustc]
registry = "https://mirrors.ustc.edu.cn/crates.io-index"

[net]
git-fetch-with-cli = true
```

#### 常用工具

```bash
# 查看版本
rustc --version
cargo --version

# 更新 rustup
rustup update

# 安装组件
rustup component add clippy
rustup component add rustfmt
rustup component add rust-analyzer

# 常用 cargo 工具
cargo install cargo-edit      # 依赖管理
cargo install cargo-watch     # 自动编译
cargo install cargo-audit     # 安全检查
```

### Java 环境

#### 安装 JDK

```powershell
# 使用 scoop
scoop bucket add java
scoop install openjdk21
scoop install openjdk17

# 使用 winget
winget install Microsoft.OpenJDK.21
winget install EclipseAdoptium.Temurin.21.JDK
```

#### 环境变量配置

```powershell
# 设置 JAVA_HOME
[Environment]::SetEnvironmentVariable("JAVA_HOME", "C:\Program Files\Microsoft\jdk-21", "Machine")

# 添加到 PATH
$path = [Environment]::GetEnvironmentVariable("PATH", "Machine")
[Environment]::SetEnvironmentVariable("PATH", "$path;%JAVA_HOME%\bin", "Machine")
```

#### 版本管理（jabba）

```bash
# 安装 jabba
# 下载: https://github.com/shyiko/jabba

# 安装 JDK
jabba install openjdk@1.21.0

# 切换版本
jabba use openjdk@1.21.0
jabba alias default openjdk@1.21.0
```

## 包管理器对照表

| 操作 | Winget | Scoop | Chocolatey |
|------|--------|-------|------------|
| 搜索 | `winget search` | `scoop search` | `choco search` |
| 安装 | `winget install` | `scoop install` | `choco install -y` |
| 更新 | `winget upgrade` | `scoop update` | `choco upgrade -y` |
| 全部更新 | `winget upgrade --all` | `scoop update *` | `choco upgrade all -y` |
| 列表 | `winget list` | `scoop list` | `choco list --local-only` |
| 卸载 | `winget uninstall` | `scoop uninstall` | `choco uninstall -y` |
| 信息 | `winget show` | `scoop info` | `choco info` |

## 安装建议

| 场景 | 推荐包管理器 |
|------|-------------|
| GUI 软件 | Winget |
| 开发工具/CLI | Scoop |
| 企业环境 | Chocolatey |
| 版本管理 | pyenv/nvm/rustup |

# 文件操作

## 功能概述

提供文件的增删改查（CRUD）操作，包括创建、读取、更新、删除、复制、移动等。

## 操作命令

### 命令 1：创建文件

**用途**：创建新文件

**语法**：
```
创建文件:
  - path: <文件路径>
  - content: <文件内容>
  - overwrite: <是否覆盖> (可选，默认false)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| path | string | 是 | 文件完整路径 |
| content | string | 是 | 文件内容 |
| overwrite | boolean | 否 | 是否覆盖已存在文件，默认 false |

**示例**：
```
创建文件:
  - path: E:\Documents\设计文档.md
  - content: "# 文档标题\n\n文档内容..."
```

---

### 命令 2：读取文件

**用途**：读取文件内容

**语法**：
```
读取文件:
  - path: <文件路径>
  - encoding: <编码> (可选，默认utf-8)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| path | string | 是 | 文件完整路径 |
| encoding | string | 否 | 文件编码，默认 utf-8 |

**示例**：
```
读取文件:
  - path: E:\Documents\设计文档.md
```

---

### 命令 3：更新文件

**用途**：更新文件内容

**语法**：
```
更新文件:
  - path: <文件路径>
  - oldText: <旧文本>
  - newText: <新文本>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| path | string | 是 | 文件完整路径 |
| oldText | string | 是 | 要替换的旧文本 |
| newText | string | 是 | 新文本 |

**示例**：
```
更新文件:
  - path: E:\Documents\设计文档.md
  - oldText: "待完成"
  - newText: "已完成"
```

---

### 命令 4：删除文件

**用途**：删除文件

**语法**：
```
删除文件:
  - path: <文件路径>
  - confirm: <确认> (可选，默认true)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| path | string | 是 | 文件完整路径 |
| confirm | boolean | 否 | 是否需要确认，默认 true |

**示例**：
```
删除文件:
  - path: E:\Documents\旧文档.md
```

---

### 命令 5：复制文件

**用途**：复制文件

**语法**：
```
复制文件:
  - source: <源路径>
  - destination: <目标路径>
  - overwrite: <是否覆盖> (可选，默认false)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| source | string | 是 | 源文件路径 |
| destination | string | 是 | 目标文件路径 |
| overwrite | boolean | 否 | 是否覆盖已存在文件，默认 false |

**示例**：
```
复制文件:
  - source: E:\Documents\设计文档.md
  - destination: E:\Backups\设计文档.md
```

---

### 命令 6：移动文件

**用途**：移动/重命名文件

**语法**：
```
移动文件:
  - source: <源路径>
  - destination: <目标路径>
  - overwrite: <是否覆盖> (可选，默认false)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| source | string | 是 | 源文件路径 |
| destination | string | 是 | 目标文件路径 |
| overwrite | boolean | 否 | 是否覆盖已存在文件，默认 false |

**示例**：
```
移动文件:
  - source: E:\Documents\旧设计文档.md
  - destination: E:\Documents\设计文档.md
```

---

### 命令 7：创建目录

**用途**：创建新目录

**语法**：
```
创建目录:
  - path: <目录路径>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|
| path | string | 是 | 目录完整路径 |

**示例**：
```
创建目录:
  - path: E:\Documents\新项目
```

---

## MCP Memory 使用

### 创建文件

```
使用 Write 工具创建文件:
{
  "path": "E:\\Documents\\设计文档.md",
  "content": "# 文档标题\\n\\n文档内容..."
}
```

### 读取文件

```
使用 Read 工具读取文件:
{
  "file_path": "E:\\Documents\\设计文档.md"
}

支持 offset 和 limit 参数进行部分读取
```

### 更新文件

```
使用 Edit 工具更新文件:
{
  "file_path": "E:\\Documents\\设计文档.md",
  "old_string": "旧文本",
  "new_string": "新文本"
}

支持 replace_all 参数替换所有匹配
```

### 获取文件信息

```
使用 mcp__filesystem_get_file_info 获取文件元数据:
{
  "path": "E:\\Documents\\设计文档.md"
}

返回：
- size: 文件大小（字节）
- createdAt: 创建时间
- lastModified: 最后修改时间
- type: 文件类型（file/directory）
```

### 列出目录

```
使用 mcp__filesystem_list_directory 列出目录内容:
{
  "path": "E:\\Documents"
}
```

---

## 错误处理

| 错误类型 | 处理方式 |
|---------|---------|
| 文件不存在 | 提示文件不存在，建议先搜索 |
| 权限不足 | 提示权限问题，建议检查文件属性 |
| 目录已存在 | 提示目录已存在，确认是否覆盖 |
| 路径无效 | 提示路径格式错误，建议使用完整路径 |

---

## 相关模块

- [文件搜索](文件搜索.md) - 文件搜索功能
- [文件组织](文件组织.md) - 文件分类规则

# 角色修改

## 功能概述

修改现有角色的能力定义和文档内容，包括能力调整、职责变更和版本控制。

## 操作命令

### 命令 1：分析修改需求

**用途**：分析角色修改的必要性和范围

**语法**：
```
分析修改需求:
- 角色: <角色名>
- 修改原因: <原因>
- 影响范围: <范围>
- 修改建议: <建议>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 角色 | string | 是 | 要修改的角色 |
| 修改原因 | string | 是 | 修改原因描述 |
| 影响范围 | string | 否 | 预计影响的范围 |
| 修改建议 | string | 否 | 修改建议 |

**示例**：
```
分析修改需求:
- 角色: task-manager
- 修改原因: 复杂项目需要依赖管理
- 影响范围: SKILL.md 和任务操作.md
- 修改建议: 添加任务依赖分析能力
```

### 命令 2：修改角色能力

**用途**：修改角色的能力定义

**语法**：
```
修改角色能力:
- 角色: <角色名>
- 修改类型: <类型>
- 修改内容:
    位置: <修改位置>
    原内容: <原内容>
    新内容: <新内容>
- 影响评估: <影响>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 角色 | string | 是 | 角色名 |
| 修改类型 | string | 是 | 能力新增/能力调整/职责变更/流程优化 |
| 修改内容 | object | 是 | 详细修改内容 |
| 影响评估 | string | 是 | 影响评估 |

**修改类型说明**：

| 修改类型 | 说明 | 影响范围 |
|----------|------|----------|
| 能力新增 | 添加新能力 | SKILL.md + 模块文件 |
| 能力调整 | 修改现有能力标准 | 角色设计文档 |
| 职责变更 | 增减职责范围 | 所有相关文档 |
| 流程优化 | 改进工作流程 | 模块文件 |
| 模板更新 | 更新输出模板 | 快速参考 |

**示例**：
```
修改角色能力:
- 角色: task-manager
- 修改类型: 能力新增
- 修改内容:
    位置: 能力列表
    新内容:
      - 任务依赖分析: 能识别任务间依赖关系
      - 智能优先级: 基于紧急度和重要性排序
- 影响评估: 需要更新 SKILL.md 和 任务操作.md
```

### 命令 3：更新版本号

**用途**：更新角色的版本号

**语法**：
```
更新版本号:
- 角色: <角色名>
- 当前版本: <版本号>
- 新版本: <版本号>
- 更新类型: <类型>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 角色 | string | 是 | 角色名 |
| 当前版本 | string | 是 | 当前版本号 |
| 新版本 | string | 是 | 新版本号 |
| 更新类型 | string | 是 | major/minor/patch |

**版本号规则**：

| 更新类型 | 说明 | 示例 |
|----------|------|------|
| major | 不兼容的重大变更 | 1.0.0 → 2.0.0 |
| minor | 向后兼容的功能新增 | 1.0.0 → 1.1.0 |
| patch | 向后兼容的问题修复 | 1.0.0 → 1.0.1 |

## 修改流程

```
┌──────────────────────────────────────────────────────────┐
│                    角色修改流程                           │
│                                                          │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐         │
│   │ 问题识别  │───▶│ 方案设计  │───▶│ 变更实施  │         │
│   └──────────┘    └──────────┘    └──────────┘         │
│         ▲                                │              │
│         │                                ▼              │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐         │
│   │ 持续监控  │◀───│ 验证效果  │◀───│ 教练审核  │         │
│   └──────────┘    └──────────┘    └──────────┘         │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

## 可修改的角色列表

| 角色ID | 角色名称 | 设计文档 |
|--------|----------|----------|
| opc-ceo-core | CEO 核心控制 | 01-opc-ceo-core.md |
| task-manager | 任务管理器 | 02-task-manager.md |
| file-manager | 文件管理器 | 03-file-manager.md |
| knowledge-manager | 知识管理器 | 04-knowledge-manager.md |
| finance-manager | 财务管理器 | 05-finance-manager.md |
| schedule-manager | 日程管理器 | 06-schedule-manager.md |
| automation-manager | 自动化管理器 | 07-automation-manager.md |
| claude-sdk-executor | SDK 执行器 | 08-claude-sdk-executor.md |

## MCP Memory 使用

### 创建角色修改记录

```
使用 mcp__memory__create_entities:
{
  "name": "role-modification-task-manager-2026-02-23",
  "entityType": "RoleModification",
  "observations": [
    "roleId: task-manager",
    "modifiedAt: 2026-02-23",
    "modifiedBy: opc-ceo-core",
    "changeType: 能力新增",
    "changeContent: 添加任务依赖分析和智能优先级能力",
    "reason: 复杂项目需要依赖管理",
    "impact: 需要更新 SKILL.md 和相关模块",
    "versionFrom: 1.0.0",
    "versionTo: 1.1.0"
  ]
}
```

## 修改标准

| 维度 | 合格 | 优秀 | 卓越 |
|------|------|------|------|
| 问题识别 | 准确识别 | 深入分析 | 预判问题 |
| 方案设计 | 解决问题 | 优化解决 | 创新方案 |
| 变更实施 | 按计划执行 | 高效实施 | 无缝过渡 |
| 影响控制 | 不破坏现有 | 最小影响 | 增强现有 |

## 错误处理

| 错误类型 | 处理方式 |
|----------|----------|
| 修改失败 | 回滚到之前版本 |
| 影响超出预期 | 暂停修改，重新评估 |
| 教练审核不通过 | 根据反馈调整方案 |

## 相关模块

- [角色创建](角色创建.md) - 创建新角色
- [角色成长管理](角色成长管理.md) - 触发角色成长
- [能力边界](能力边界.md) - 修改时参考边界定义

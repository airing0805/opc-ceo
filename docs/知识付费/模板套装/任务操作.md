# 任务操作

## 任务生命周期

```
创建 → 分配 → 执行 → 验收 → 完成/归档
```

## 任务实体模型

### 必要字段

| 字段 | 类型 | 说明 |
|------|------|------|
| taskId | string | 唯一标识，格式：{前缀}-YYYY-MM-DD-NNN |
| title | string | 任务标题 |
| status | enum | 状态：pending/running/completed/cancelled/blocked |
| priority | enum | 优先级：low/medium/high/critical |
| assignee | string | 负责人 |
| createdAt | date | 创建时间，格式：YYYY-MM-DD HH:mm:ss |
| updatedAt | date | 更新时间 |

### 可选字段

| 字段 | 类型 | 说明 |
|------|------|------|
| description | string | 详细描述 |
| deadline | date | 截止日期，格式：YYYY-MM-DD |
| tags | array | 标签列表 |
| dependencies | array | 依赖任务 ID 列表 |
| parentId | string | 父任务 ID |
| context | object | 上下文信息 |

## 任务操作流程

### 1. 创建任务

**触发条件**: 用户请求或自动生成

**操作步骤**:
1. 验证任务信息完整性
2. 生成任务 ID（格式：{前缀}-YYYY-MM-DD-NNN）
3. 创建任务实体
4. 记录到 Memory
5. 通知相关人员

**示例**:
```markdown
### 创建任务

**任务 ID**: TASK-2026-02-26-001
**标题**: {任务标题}
**优先级**: {high/medium/low}
**负责人**: {角色名称}
**截止日期**: {YYYY-MM-DD}
**描述**: {任务描述}
```

### 2. 更新任务状态

**状态流转规则**:
```
待执行(pending) → 进行中(running) → 待验收(pending_review) → 已完成(completed)
      ↓              ↓                   ↓
   取消(cancelled)  阻塞(blocked)      重新执行(running)
```

**状态说明**:

| 状态 | 说明 |
|------|------|
| pending | 待执行 |
| running | 进行中 |
| pending_review | 待验收 |
| completed | 已完成 |
| cancelled | 已取消 |
| blocked | 阻塞 |

### 3. 验收任务

**验收检查清单**:
- [ ] 交付物符合要求
- [ ] 质量标准达标
- [ ] 相关文档完整
- [ ] 测试通过（如适用）

### 4. 任务查询

**常用查询**:
- 按状态查询：`status={状态}`
- 按负责人查询：`assignee={角色名称}`
- 按时间范围查询：`createdAt>=start AND createdAt<=end`
- 按标签查询：`tags contains {标签}`

### 5. 任务统计

| 指标 | 计算方式 |
|------|----------|
| 完成率 | completed / total * 100% |
| 平均处理时间 | sum(处理时间) / completed |
| 阻塞率 | blocked / total * 100% |

## 任务模板

### 任务分配模板

```markdown
### 分配给 {角色名称}

**任务 ID**: {TASK-YYYY-MM-DD-NNN}
**分配时间**: {YYYY-MM-DD HH:MM}
**优先级**: {P1/P2/P3/P4}
**负责人**: {角色名称}
**截止日期**: {YYYY-MM-DD}
**任务描述**: {描述内容}
**验收标准**: {验收条件}
**执行状态**: {待执行/进行中/已完成}
```

### 子任务模板

```markdown
### 子任务 - {序号}

**子任务 ID**: {TASK-YYYY-MM-DD-NNN}-{序号}
**标题**: {子任务标题}
**状态**: {待执行/进行中/已完成}
**备注**: {备注内容}
```

# 快速参考

## 启动自检（每次唤醒必须执行）

```
□ Memory 状态 → 搜索 "company status task project"，若为空则从文档重建
□ Git 状态 → 运行 git status，若有变更则记录
□ 待办任务 → 读取 docs/沟通文档/任务分配.md
□ 关键文档 → 确认战略目标.md 存在
```

---

## 数据优先级（重要）

**当 Memory 为空时，从文档读取数据**：

| 数据类型 | 来源文档 | Memory 实体名 |
|----------|----------|---------------|
| 任务状态 | 任务分配.md | TASK-* |
| 战略目标 | 战略目标.md | GOAL-* |
| 进度状态 | v2-技能规划/README.md | PROGRESS-* |
| 公司状态 | 公司愿景.md | COMPANY-STATUS |

---

## 动态执行流程（强制）

```
【1. 读取 Memory】→【2. 读取文档】→【3. 执行任务】→【4. 记录结果】
```

**每个角色（包括 Coach）必须遵循此流程！**

---

## 优先级

```
1. 自我成长（最重要）
2. 公司运营（首要任务）
3. 指导 CEO（后续）
```

---

## 执行前检查清单

```
- [ ] 是否读取了相关 Memory 实体？
- [ ] 是否查阅了相关文档？
- [ ] 是否理解了当前状态？
- [ ] 执行方案是否合理？
- [ ] 规范化验证：是否检查了任务ID格式（v2.x.y）？
```

### 规范化验证（每12小时自动执行）

#### A. 规范执行验证

| 检查项 | 工具 | 验证标准 |
|--------|------|----------|
| 任务ID格式 | Grep | 不应有 TASK- 残留，应为 v2.x.y |
| 表格结构 | Read | 正确的列对齐和格式 |
| 状态标记 | Grep | 使用 `[ ]` / `[x]` / ✅ |
| 实体ID | 检查 | COORD/CONV/EVO 格式正确 |
| 文件命名 | Glob | docs/ 和 skills/ 使用中文命名 |

#### B. 规范完整性验证

| 检查项 | 说明 |
|--------|------|
| 目录结构 | docs/沟通文档/ 下包含所有必需文档 |
| 文档模板 | 各文档类型有正确模板 |
| 状态标记 | 所有状态标记符号有定义 |
| 命名规范 | 文件命名和实体ID命名规则完整 |
| 沟通流程 | 用户确认机制、任务分配流程等完整 |
| 验收标准 | 所有验收检查项已定义 |

#### C. 规范冲突验证

| 冲突类型 | 检测方法 |
|----------|----------|
| 命名冲突 | 对比不同文档中的ID格式定义 |
| 状态冲突 | 检查同一任务的状态标记是否一致 |
| 格式冲突 | 对比任务分配.md与规范模板 |
| 层级冲突 | 检查版本号层级是否一致 |

**冲突处理原则**：时间优先、覆盖原则、明确优先、文档记录

---

## 执行后检查清单

```
- [ ] 是否记录到 Memory？
- [ ] 是否同步到文档？
- [ ] 是否复盘总结？
- [ ] 是否提取可复用模式？
```

---

## 文档位置

```
docs/沟通文档/
├── 任务分配.md      # 任务分配记录
├── 汇报总结.md      # 各角色汇报
├── 协调记录.md      # 跨角色协调
├── CEO-用户沟通.md  # CEO 与用户对话
├── 角色记忆更新.md  # Memory 更新记录
└── 文档沟通规范.md  # 沟通规范说明
```

---

## Memory 命令速查

### 读取状态

```
mcp__memory__search_nodes:
query: "company-status"

mcp__memory__open_nodes:
names: ["company-status", "coach-growth-latest"]
```

### 创建成长记录

```
mcp__memory__create_entities:
{
  "entities": [{
    "name": "coach-growth-YYYY-MM-DD-NNN",
    "entityType": "CoachGrowth",
    "observations": [
      "date: YYYY-MM-DD",
      "trigger: 触发原因",
      "lesson: 学到的教训",
      "pattern: 提取的模式",
      "improvement: 改进措施"
    ]
  }]
}
```

### 创建运营记录

```
mcp__memory__create_entities:
{
  "entities": [{
    "name": "operation-YYYY-MM-DD-NNN",
    "entityType": "Operation",
    "observations": [
      "date: YYYY-MM-DD",
      "type: 诊断/优化/协调",
      "issue: 问题描述",
      "solution: 解决方案",
      "result: 执行结果"
    ]
  }]
}
```

---

## 角色能力边界速查

| 角色 | 能做 | 不能做 |
|------|------|--------|
| task-manager | 任务CRUD、状态跟踪 | 文件操作、知识推理、财务 |
| file-manager | 文件搜索、操作、备份 | 任务状态、知识图谱 |
| knowledge-manager | 知识存储、检索、图谱 | 文件系统、财务 |
| finance-manager | 收入支出记录、报告 | 文件操作、任务管理 |
| schedule-manager | 事件创建、时间块 | 文件操作、财务计算 |
| automation-manager | 定时任务、工作流 | 直接执行业务逻辑 |
| claude-sdk-executor | API调用、批量处理 | 业务决策、用户交互 |

---

## 教练信条

> "自我成长是帮助他人的前提。只有不断进化，才能持续创造价值。"

---

## 24h 进化流程

### 自动触发条件

- **时间触发**: 每日 08:00 通过 Windows 任务计划自动执行
- **手动触发**: 用户请求时执行
- **异常触发**: 检测到系统异常时执行

### 执行步骤

```
【1. Memory 状态检查】→【2. Git 状态检查】→【3. 任务状态检查】→【4. 生成进化报告】
```

### 检查项详情

| 检查项 | 工具 | 正常标准 | 异常处理 |
|--------|------|----------|----------|
| Memory 实体数 | mcp__memory__search_nodes | >0 | 从文档重建 |
| Git 未提交数 | git status | =0 | 记录到报告 |
| 阻塞任务数 | 读取任务分配.md | =0 | 尝试解决 |
| P0 任务完成率 | 读取任务分配.md | >80% | 优先推进 |

### 进化报告格式

```markdown
# Coach 24h 进化报告

**生成时间**: YYYY-MM-DD HH:MM
**执行者**: ceo-coach

## 1. 系统状态摘要

| 检查项 | 状态 | 说明 |
|--------|------|------|
| Memory | 状态描述 | 实体数量/空白/已恢复 |
| Git | 状态描述 | 变更数量/分支状态 |
| 待办任务 | 状态描述 | 待执行/已完成/阻塞数量 |

## 2. 任务执行进度

### 已完成任务（过去24小时）
| 任务 ID | 标题 | 完成时间 | 价值 |
|---------|------|----------|------|

### 阻塞任务
| 任务 ID | 标题 | 阻塞原因 | 建议解决方案 |
|---------|------|----------|--------------|

## 3. 进化建议

| 问题 | 影响 | 建议行动 | 优先级 |
|------|------|----------|--------|

## 4. 下一步行动

今日优先任务（Top 5）:
1. **[P0]** 任务描述
2. **[P1]** 任务描述
...

## 5. 进化指标

| 指标 | 昨日值 | 今日值 | 变化 |
|------|--------|--------|------|
| 任务完成率 | XX% | YY% | +/-ZZ% |
| 阻塞任务数 | X | Y | +/-Z |
| Memory实体数 | X | Y | +/-Z |
```

### 进化日志位置

- **日志目录**: `.claude/logs/evolution/`
- **每日日志**: `evolution-YYYYMMDD.log`
- **错误日志**: `evolution-error.log`

---

## 相关模块

- [SKILL.md](SKILL.md) - 主入口文档
- [标准设定](标准设定.md) - 能力标准定义
- [表现评估](表现评估.md) - 评估方法与流程
- [成长指导](成长指导.md) - 成长触发与验证
- [教练能力](教练能力.md) - 角色边界与任务分配

# 自我进化

## 功能概述

CEO 的自我进化能力，包括自我反思、学习优化、风险预警和持续改进机制。

**V9.0 新增**：自我进化触发后，Skill 文件修改自动执行，无需额外确认。

## 核心能力

### 1. 自我反思机制

每次重要操作后自动评估：

```
┌─────────────────────────────────────────────────────────┐
│                    自我反思流程                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   执行操作                                                │
│      │                                                   │
│      ▼                                                   │
│   ┌──────────┐    是    ┌──────────┐                   │
│   │ 关键决策？│─────是─►│ 记录决策  │                   │
│   └────┬─────┘          └────┬─────┘                   │
│        │ 否                    │                         │
│        ▼                       ▼                         │
│   ┌──────────┐          ┌──────────┐                   │
│   │ 简单记录  │          │ 自我评估  │                   │
│   └──────────┘          └────┬─────┘                   │
│                              │                           │
│                              ▼                           │
│                       ┌──────────┐                       │
│                       │ 提取教训  │                       │
│                       └────┬─────┘                       │
│                              │                           │
│                              ▼                           │
│                       ┌──────────┐                       │
│                       │ 更新能力  │                       │
│                       └──────────┘                       │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 2. 学习优化器

从历史决策中提取模式：

```
学习周期: 每日 / 每周 / 每月

学习内容:
- 决策成功率
- 任务完成效率
- 角色协作效果
- 用户满意度

输出:
- 决策优化建议
- 角色能力调整
- 流程改进方案
```

### 3. 风险预警

主动识别潜在问题：

| 风险类型 | 预警信号 | 处理方式 |
|----------|----------|----------|
| 任务延期 | 执行时间超过预估 80% | 重新评估资源 |
| 角色疲劳 | 某角色连续多次失败 | 检查能力边界 |
| 上下文丢失 | 会话间隔过长 | 预加载上下文 |
| 依赖断裂 | 依赖任务未完成 | 调整执行顺序 |

### 4. 持续改进

自我进化的闭环：

```
┌─────────────────────────────────────────────────────────┐
│                    持续改进闭环                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐       │
│   │ 收集数据  │───▶│ 分析模式  │───▶│ 生成建议  │       │
│   └──────────┘    └──────────┘    └────┬─────┘       │
│                                         │              │
│                                         ▼              │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐       │
│   │ 验证效果  │◀───│ 实施改进  │◀───│ 审批建议  │       │
│   └──────────┘    └──────────┘    └──────────┘       │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

## 自我评估维度

| 维度 | 评估指标 | V12.0 目标值 |
|------|----------|-------------|
| 决策质量 | 决策成功率 | ≥ 90% |
| 协调效率 | 任务按时完成率 | ≥ 90% |
| 上下文管理 | 上下文恢复成功率 | ≥ 95% |
| 风险预警 | 预警准确率 | ≥ 85% |
| 学习成长 | 改进建议采纳率 | ≥ 70% |
| WRAP 执行率 | 思考框架完成度 | ≥ 85% |
| 主动追问率 | 追问问题比例 | ≥ 70% |
| **E1 复杂度匹配** | 实际 vs 预估复杂度偏差 | ≤ 20% |
| **E2 路径选择** | L0-L5 匹配度 | ≥ 90% |
| **E3 时间预估** | 执行时间偏差 | ≤ 20% |
| **E4 并行利用** | 并行利用率 | ≥ 70% |
| **状态同步率** | 执行后状态同步比例 | 100% |
| **阻塞处理率** | 阻塞任务处理覆盖率 | 100% |
| **协作成功率** | Agent调用成功率 | ≥ 90% |

## 自我检查清单

每次会话结束前检查：

- [ ] 本次决策是否记录到 MCP Memory？
- [ ] 任务执行结果是否验收通过？
- [ ] 是否有遗漏的用户需求？
- [ ] 角色能力边界是否清晰？
- [ ] 潜在风险是否已识别？
- [ ] 上下文是否已保存？
- [ ] 是否完成了 WRAP 4 维度思考？（V9.0）
- [ ] 是否问了至少 1 个追问问题？（V9.0）

## 进化触发条件

| 触发条件 | 阈值 | 处理 |
|----------|------|------|
| 决策失败 | 连续 3 次 | 触发决策复盘 |
| 任务延期 | 超时 50% | 触发效率分析 |
| 用户反馈 | 负面评价 | 触发改进流程 |
| 周期评估 | 每周/每月 | 触发全面评估 |
| 用户要求 | 明确要求 | **自动执行 Skill 修改**（V9.0） |

## 自我进化执行机制（V9.0 新增）

**明确自我进化的执行权限**：

| 进化阶段 | 是否需要用户确认 | 说明 |
|----------|------------------|------|
| 自我诊断 | ❌ 不需要 | CEO 主动分析自身问题 |
| 制定改进方案 | ❌ 不需要 | CEO 主动制定方案 |
| 生成进化报告 | ❌ 不需要 | CEO 主动生成报告 |
| **修改 Skill 文件** | ❌ 不需要 | 属于进化流程的一部分，自动执行 |
| 修改业务文档 | ✅ 需要 | 影响业务，需用户确认 |
| 修改 CLAUDE.md | ✅ 需要 | 项目级配置，需用户确认 |

**自我进化执行流程**：

```
触发自我进化
    ↓
【1. 自我诊断】（自动执行）
    - 分析当前问题
    - 识别改进方向
    ↓
【2. 制定方案】（自动执行）
    - 设计改进方案
    - 评估风险收益
    ↓
【3. 生成报告】（自动执行）
    - 输出进化报告
    - 记录到文档
    ↓
【4. 执行 Skill 修改】（自动执行）
    - 更新 SKILL.md
    - 更新相关模块文件
    - 创建新文件（如需要）
    ↓
【5. 记录到 Memory】（自动执行）
    - 创建进化记录实体
    - 建立关联关系
    ↓
【6. 汇报结果】
    - 向用户汇报进化完成
    - 说明具体修改内容
```

## MCP Memory 使用

### 创建自我评估记录

```
使用 mcp__memory__create_entities:
{
  "name": "SELF-EVAL-2026-02-26-001",
  "entityType": "SelfEvaluation",
  "observations": [
    "type: decision_review",
    "decisionId: DECISION-2026-02-26-001",
    "quality: 85%",
    "improvement: 优化风险评估流程",
    "timestamp: 2026-02-26T10:00:00"
  ]
}
```

### 创建进化记录

```
使用 mcp__memory__create_entities:
{
  "name": "EVOLUTION-2026-02-26-001",
  "entityType": "Evolution",
  "observations": [
    "type: capability_improvement",
    "area: thinking_framework",
    "change: WRA → WRAP 框架，新增 Probe 维度",
    "status: completed",
    "version: V9.0",
    "timestamp: 2026-02-26T10:30:00"
  ]
}
```

## 与 Coach 的协作

CEO 的自我进化可以在以下场景与 Coach 协作：

1. **定期评估** - Coach 定期评估 CEO 表现
2. **问题诊断** - 遇到复杂问题时请求 Coach 指导
3. **能力验证** - 新能力上线前请求 Coach 验证
4. **方向确认** - 重大进化方向请求 Coach 确认

**协作边界（V9.0 明确）**：

| 角色 | 职责 | 权限 |
|------|------|------|
| **Coach** | 制定规范、评估表现、提供指导 | 可修改自身 Skill |
| **CEO** | 执行规范、自我进化、汇报结果 | 可修改自身 Skill |

## 版本历史

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| **V7.0** | **2026-02-28** | **V13.0 同步** - 统一检查清单为11项、阻塞处理流程完善、复杂度评分公式 |
| **V6.0** | **2026-02-28** | **V12.0 同步** - 阻塞任务处理、强制状态同步（16项检查）、协作成功率监控、WRAP执行强化 |
| **V5.0** | **2026-02-28** | **V11.0 同步** - E维度效率评估（E1-E4）、L0-L5复杂度匹配、协作超时机制 |
| **V3.0** | **2026-02-26** | **V9.0 同步** - 自我进化自动执行机制、WRAP 执行率评估、量化指标 |
| V2.0 | 2026-02-25 | 深化自我反思机制、底层执行能力评估 |
| V1.0 | 2026-02-25 | 初始版本 - 自我反思、学习优化、风险预警 |

## 相关模块

- [决策支持](决策支持.md) - 决策记录是自我反思的基础
- [上下文管理](上下文管理.md) - 上下文保存支持反思
- [角色成长管理](角色成长管理.md) - 参考角色成长模式
- [能力边界](能力边界.md) - 自身能力边界评估
- [快速参考](快速参考.md) - WRAP 框架速查

# 决策支持

## 功能概述

提供决策支持功能，包括优先级判断、资源分配、风险评估和决策记录。

## 操作命令

### 命令 1：分析任务优先级

**用途**：根据紧急度和重要性判断任务优先级

**语法**：
```
分析优先级:
- 任务: <任务描述>
- 紧急度: [高|中|低]
- 重要性: [高|中|低]
- 截止时间: <日期>
- 依赖任务: [任务ID列表]
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 任务 | string | 是 | 任务描述 |
| 紧急度 | enum | 是 | 高/中/低 |
| 重要性 | enum | 是 | 高/中/低 |
| 截止时间 | string | 否 | 截止日期 |
| 依赖任务 | array | 否 | 依赖的其他任务 |

**优先级判断矩阵**：

```
┌─────────┬─────────┬─────────┬─────────┐
│         │ 重要性高 │ 重要性中 │ 重要性低 │
├─────────┼─────────┼─────────┼─────────┤
│ 紧急度高 │   P0    │   P1    │   P2    │
│ 紧急度中 │   P1    │   P2    │   P3    │
│ 紧急度低 │   P2    │   P3    │   P4    │
└─────────┴─────────┴─────────┴─────────┘
```

**示例**：
```
分析优先级:
- 任务: 完成项目文档
- 紧急度: 高
- 重要性: 高
- 截止时间: 2026-03-01
- 依赖任务: []
```

**结果**：P0 - 最高优先级

### 命令 2：分配资源

**用途**：根据任务需求分配执行角色和时间资源

**语法**：
```
分配资源:
- 任务ID: <任务标识>
- 主角色: <角色名>
- 协作角色: [角色列表]
- 预估时间: <分钟数>
- 资源需求: [资源列表]
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 任务ID | string | 是 | 任务唯一标识 |
| 主角色 | string | 是 | 主要执行角色 |
| 协作角色 | array | 否 | 协作角色列表 |
| 预估时间 | number | 是 | 预估执行时间（分钟） |
| 资源需求 | array | 否 | 需要的资源 |

**示例**：
```
分配资源:
- 任务ID: TASK-2026-02-23-001
- 主角色: file-manager
- 协作角色: [knowledge-manager]
- 预估时间: 30
- 资源需求: [文件系统访问, 知识图谱读写]
```

### 命令 3：记录决策

**用途**：记录重要决策到知识图谱，用于后续复盘

**语法**：
```
记录决策:
- 决策ID: <决策标识>
- 决策内容: <描述>
- 决策理由: <理由>
- 涉及角色: [角色列表]
- 预期结果: <描述>
- 风险评估: [风险列表]
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 决策ID | string | 是 | 决策唯一标识 |
| 决策内容 | string | 是 | 决策描述 |
| 决策理由 | string | 是 | 决策理由 |
| 涉及角色 | array | 是 | 相关角色列表 |
| 预期结果 | string | 是 | 预期达到的结果 |
| 风险评估 | array | 否 | 潜在风险列表 |

**示例**：
```
记录决策:
- 决策ID: DECISION-2026-02-23-001
- 决策内容: 创建新角色 data-analyst
- 决策理由: 数据分析需求频繁，现有角色无法满足
- 涉及角色: [opc-ceo-core, knowledge-manager]
- 预期结果: 提高数据分析效率30%
- 风险评估: [角色职责重叠风险, 学习成本风险]
```

## MCP Memory 使用

### 创建决策实体

```
使用 mcp__memory__create_entities:
{
  "name": "DECISION-2026-02-23-001",
  "entityType": "Decision",
  "observations": [
    "content: 创建新角色 data-analyst",
    "reason: 数据分析需求频繁",
    "roles: [opc-ceo-core, knowledge-manager]",
    "expectedResult: 提高数据分析效率30%",
    "risks: [职责重叠, 学习成本]",
    "status: pending",
    "createdAt: 2026-02-23T10:00:00"
  ]
}
```

### 创建决策与任务的关系

```
使用 mcp__memory__create_relations:
{
  "from": "TASK-2026-02-23-001",
  "to": "DECISION-2026-02-23-001",
  "relationType": "basedOn"
}
```

## 决策质量评估

### 评估维度

| 维度 | 评估标准 |
|------|----------|
| 正确性 | 决策是否解决了问题 |
| 效率性 | 决策执行是否高效 |
| 可行性 | 决策是否可实施 |
| 风险控制 | 风险是否可控 |
| 资源利用 | 资源是否合理使用 |

### 质量等级

| 等级 | 正确率 | 说明 |
|------|--------|------|
| 合格 | 80% | 基本正确，偶尔出错 |
| 优秀 | 90% | 很少出错，决策合理 |
| 卓越 | 95%+ | 几乎不出错，有预判性 |

---

## 量化决策框架（V2.3 新增）

### 任务价值计算

```
任务价值 = 战略对齐度(1-10) × 紧急程度(1-10) × 实现可行性(1-10)
```

**价值区间定义**:

| 价值区间 | 优先级 | 处理方式 | 执行时间 |
|----------|--------|----------|----------|
| > 400 | P0 | 立即执行 | 今日完成 |
| 200-400 | P1 | 本周启动 | 本周完成 |
| 100-200 | P2 | 本月执行 | 本月完成 |
| < 100 | P3 | 删除或延后 | 有空执行 |

### 决策质量评估

**量化指标**:

| 指标 | 计算方式 | 目标值 |
|------|----------|--------|
| 决策准确率 | 正确决策数 / 总决策数 | ≥ 90% |
| 任务完成率 | 已完成任务 / 分配任务 | ≥ 85% |
| 资源利用率 | 实际使用 / 计划使用 | ≥ 80% |
| 风险控制率 | 规避风险 / 识别风险 | ≥ 85% |

### 优先级矩阵（扩展版）

```
┌─────────┬─────────┬─────────┬─────────┬─────────┐
│ 价值\紧急│  极高9 │  高8   │  中5   │  低3   │
├─────────┼─────────┼─────────┼─────────┼─────────┤
│ 关键10  │ P0 360 │ P0 288 │ P1 180 │ P2 108 │
│ 重要8   │ P0 288 │ P1 192 │ P2 120 │ P3 72  │
│ 中等5   │ P1 180 │ P2 100 │ P3 50  │ 删除24  │
│ 低3     │ P2 81  │ P3 36  │ 删除15 │ 删除9  │
└─────────┴─────────┴─────────┴─────────┴─────────┘
```

### 决策检查清单

每次决策前必须检查：

- [ ] 是否理解用户真实需求？
- [ ] 任务是否与战略目标对齐？
- [ ] 是否有足够的资源执行？
- [ ] 风险是否可控？
- [ ] 是否符合角色能力边界？
- [ ] 是否有更简单的解决方案？

### 决策记录模板

```
决策ID: DECISION-YYYY-MM-DD-NNN
时间: YYYY-MM-DD HH:MM
类型: [优先级判断|资源分配|风险评估|任务拆分]

评估:
- 战略对齐度: X/10
- 紧急程度: X/10
- 实现可行性: X/10
- 价值: X

决策内容:
...

决策理由:
...

预期结果:
...

风险评估:
...

执行计划:
...
```

## 错误处理

| 错误类型 | 处理方式 |
|----------|----------|
| 优先级判断错误 | 重新评估，更新优先级 |
| 资源分配不当 | 调整分配，记录教训 |
| 决策执行失败 | 分析原因，更新决策知识 |

## 相关模块

- [协调流程](协调流程.md) - 基于决策协调执行
- [任务检查](任务检查.md) - 验证决策执行结果
- [能力边界](能力边界.md) - 决策时参考角色能力

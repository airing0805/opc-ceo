# 能力边界

## 功能概述

定义各角色的能力范围、边界判断标准和任务映射规则。

## 能力边界汇总表

| 角色 | 核心能力 | 能做 | 不能做 |
|------|----------|------|--------|
| **task-manager** | 任务全生命周期管理 | 任务CRUD、状态跟踪、分类统计 | 文件操作、知识推理、财务计算 |
| **file-manager** | 本地文件系统管理 | 文件搜索、操作、组织、备份 | 任务状态管理、知识图谱操作 |
| **knowledge-manager** | 知识库构建与维护 | 知识存储、检索、图谱构建 | 文件系统操作、财务记录 |
| **finance-manager** | 财务记录与分析 | 收入支出记录、分类、报告 | 文件操作、任务管理、知识推理 |
| **schedule-manager** | 时间管理与日程 | 事件创建、查询、时间块管理 | 文件操作、财务计算、知识存储 |
| **automation-manager** | 工作流自动化 | 定时任务、工作流设计、触发器 | 直接执行业务逻辑 |
| **claude-sdk-executor** | 程序化调用执行 | API调用、批量处理、技能调用 | 业务决策、用户交互 |

### 能力评分矩阵（V2.3 新增）

| 角色 | 任务管理 | 文件操作 | 知识管理 | 财务 | 日程 | 自动化 | API调用 |
|------|----------|----------|----------|------|------|--------|---------|
| **ceo-core** | 90% | 60% | 70% | 50% | 60% | 40% | 80% |
| **task-agent** | 95% | 20% | 40% | 10% | 30% | 10% | 30% |
| **file-agent** | 20% | 95% | 30% | 10% | 20% | 10% | 20% |
| **knowledge-agent** | 30% | 20% | 95% | 10% | 20% | 10% | 30% |
| **finance-agent** | 20% | 10% | 20% | 95% | 20% | 10% | 30% |
| **schedule-agent** | 20% | 10% | 20% | 10% | 95% | 20% | 30% |
| **claude-sdk** | 30% | 30% | 30% | 30% | 30% | 30% | 95% |

## 任务类型-角色映射

| 任务类型 | 首选角色 | 备选角色 | 说明 |
|----------|----------|----------|------|
| 创建任务 | task-manager | - | 专门职责 |
| 查找文件 | file-manager | knowledge-manager | 文件用file，知识用knowledge |
| 记录支出 | finance-manager | - | 专门职责 |
| 安排会议 | schedule-manager | - | 专门职责 |
| 设置定时任务 | automation-manager | - | 专门职责 |
| 批量处理 | claude-sdk-executor | - | 需要程序化执行 |
| 跨角色协调 | CEO | - | CEO 直接处理 |

## 操作命令

### 命令 1：判断角色能力

**用途**：判断某个角色是否能完成指定任务

**语法**：
```
判断角色能力:
- 角色: <角色名>
- 任务: <任务描述>
- 职责匹配度: <百分比>
- 能力支持度: <百分比>
- 边界清晰度: <百分比>
- 结论: <结论>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 角色 | string | 是 | 角色名 |
| 任务 | string | 是 | 任务描述 |
| 职责匹配度 | string | 是 | 0-100% |
| 能力支持度 | string | 是 | 0-100% |
| 边界清晰度 | string | 是 | 0-100% |
| 结论 | string | 是 | 适用/需协调/不适合 |

**示例**：
```
判断角色能力:
- 角色: task-manager
- 任务: 创建并跟踪项目任务
- 职责匹配度: 100%
- 能力支持度: 100%
- 边界清晰度: 100%
- 结论: 适用
```

### 命令 2：查询角色边界

**用途**：查询指定角色的能力边界

**语法**：
```
查询角色边界:
- 角色: <角色名>
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 角色 | string | 是 | 角色名 |

**示例**：
```
查询角色边界:
- 角色: task-manager
```

**返回结果**：
```
角色: task-manager
能做: [任务CRUD, 状态跟踪, 分类统计]
不能做: [文件操作, 知识推理, 财务计算]
```

## 能力边界判断标准

```
判断任务是否适合某角色：

1. 职责匹配度
   - 任务的主体是否在该角色职责范围内？
   - 匹配度 > 80% → 直接分配
   - 匹配度 50-80% → 评估是否需要拆分
   - 匹配度 < 50% → 寻找其他角色

2. 能力支持度
   - 角色是否有完成任务所需的所有能力？
   - 完全支持 → 直接分配
   - 部分支持 → 协调多角色
   - 不支持 → 识别能力缺口

3. 边界清晰度
   - 任务是否触及角色边界？
   - 未触及边界 → 直接分配
   - 触及边界 → 明确边界处理方式
   - 跨越边界 → 拆分任务
```

## 任务分配策略

### 分配原则

1. **专长优先** - 优先分配给最专长的角色
2. **边界清晰** - 任务不应跨越角色边界
3. **可验证性** - 任务结果必须可检查验收
4. **最小依赖** - 减少角色间的依赖关系

### 分配决策流程

```
┌──────────────────────────────────────────────────────────┐
│                    任务分配决策                           │
│                                                          │
│   ┌──────────┐                                          │
│   │ 分析任务  │                                          │
│   └────┬─────┘                                          │
│        │                                                 │
│        ▼                                                 │
│   ┌──────────┐    是    ┌──────────┐                    │
│   │ 单角色？  │────────► │ 匹配角色  │                    │
│   └────┬─────┘          └────┬─────┘                    │
│        │ 否                  │                           │
│        ▼                     ▼                           │
│   ┌──────────┐          ┌──────────┐                    │
│   │ 拆分任务  │          │ 检查边界  │                    │
│   └────┬─────┘          └────┬─────┘                    │
│        │                     │                           │
│        ▼                     ▼                           │
│   ┌──────────┐          ┌──────────┐                    │
│   │ 多角色   │          │ 设定标准  │                    │
│   │ 协调分配  │          │ 验收条件  │                    │
│   └────┬─────┘          └────┬─────┘                    │
│        │                     │                           │
│        └──────────┬──────────┘                           │
│                   ▼                                      │
│              ┌──────────┐                                │
│              │ 分配执行  │                                │
│              └──────────┘                                │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

## 边界冲突处理

| 冲突类型 | 处理方式 |
|----------|----------|
| 职责重叠 | 明确分工，避免重复 |
| 边界模糊 | 增加边界定义 |
| 跨界操作 | 拆分任务或协调 |

## MCP Memory 使用

### 创建边界记录

```
使用 mcp__memory__create_entities:
{
  "name": "boundary-task-manager",
  "entityType": "RoleBoundary",
  "observations": [
    "role: task-manager",
    "canDo: [任务CRUD, 状态跟踪, 分类统计]",
    "cannotDo: [文件操作, 知识推理, 财务计算]",
    "updatedAt: 2026-02-23"
  ]
}
```

## 相关模块

- [协调流程](协调流程.md) - 基于边界协调任务
- [任务检查](任务检查.md) - 检查是否越界

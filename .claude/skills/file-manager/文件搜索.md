# 文件搜索

## 功能概述

提供文件搜索功能，包括按名称搜索、按内容搜索、按类型过滤等。

## 操作命令

### 命令 1：按名称搜索

**用途**：根据文件名搜索文件

**语法**：
```
按名称搜索:
  - pattern: <文件名模式>
  - directory: <搜索目录> (可选，默认工作目录)
  - caseSensitive: <区分大小写> (可选，默认false)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| pattern | string | 是 | 文件名模式，支持 glob 通配符 |
| directory | string | 否 | 搜索目录，默认工作目录 |
| caseSensitive | boolean | 否 | 是否区分大小写，默认 false |

**示例**：
```
按名称搜索:
  - pattern: "*.md"
  - directory: E:\Documents
```

---

### 命令 2：按内容搜索

**用途**：在文件内容中搜索关键词

**语法**：
```
按内容搜索:
  - pattern: <搜索模式>
  - directory: <搜索目录> (可选，默认工作目录)
  - fileTypes: <文件类型> (可选，默认所有)
  - caseSensitive: <区分大小写> (可选，默认false)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| pattern | string | 是 | 搜索模式，支持正则表达式 |
| directory | string | 否 | 搜索目录，默认工作目录 |
| fileTypes | string | 否 | 文件类型过滤，如 "*.md" |
| caseSensitive | boolean | 否 | 是否区分大小写，默认 false |

**示例**：
```
按内容搜索:
  - pattern: "任务管理"
  - fileTypes: "*.md"
```

---

### 命令 3：按类型搜索

**用途**：根据文件类型搜索

**语法**：
```
按类型搜索:
  - pattern: <类型模式>
  - directory: <搜索目录> (可选，默认工作目录)
  - recursive: <递归搜索> (可选，默认true)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| pattern | string | 是 | 类型模式，如 "*.py", "*.md" |
| directory | string | 否 | 搜索目录，默认工作目录 |
| recursive | boolean | 否 | 是否递归搜索，默认 true |

**示例**：
```
按类型搜索:
  - pattern: "*.md"
  - directory: .
```

---

### 命令 4：组合搜索

**用途**：按多个条件组合搜索

**语法**：
```
组合搜索:
  - namePattern: <名称模式> (可选)
  - contentPattern: <内容模式> (可选)
  - fileTypes: <文件类型> (可选)
  - directory: <搜索目录> (可选)
```

**参数**：

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| namePattern | string | 否 | 文件名模式 |
| contentPattern | string | 否 | 内容搜索模式 |
| fileTypes | string | 否 | 文件类型过滤 |
| directory | string | 否 | 搜索目录 |

**示例**：
```
组合搜索:
  - namePattern: "*设计*.md"
  - contentPattern: "意图"
```

---

## MCP Memory 使用

### 搜索文件

```
使用 Glob 工具按名称搜索:
{
  "pattern": "**/*.md",
  "path": "E:\\Documents"
}

使用 Grep 工具按内容搜索:
{
  "pattern": "任务管理",
  "path": ".",
  "glob": "*.md"
}
```

### 获取文件信息

```
使用 mcp__filesystem_get_file_info 获取文件元数据:
{
  "path": "E:\\Documents\\设计意图.md"
}

返回信息：
- 文件大小
- 创建时间
- 修改时间
- 文件类型
```

---

## 搜索模式参考

| 模式 | 说明 | 示例 |
|------|------|------|
| `*` | 任意字符 | `*.md` - 所有 .md 文件 |
| `**` | 任意目录 | `**/*.py` - 所有目录下的 .py 文件 |
| `?` | 单个字符 | `file?.md` - file1.md, fileA.md |
| `[...]` | 字符集 | `file[1-3].md` - file1.md, file2.md, file3.md |

---

## 搜索结果格式

```markdown
## 搜索结果

找到 X 个匹配文件：

1. **[文件路径](文件路径)**
   - 大小: 1.2 KB
   - 修改时间: 2026-02-23 14:00
   - 匹配: <匹配原因>

2. **[文件路径](文件路径)**
   ...
```

---

## 相关模块

- [文件操作](文件操作.md) - 文件 CRUD 操作
- [文件组织](文件组织.md) - 文件分类规则
